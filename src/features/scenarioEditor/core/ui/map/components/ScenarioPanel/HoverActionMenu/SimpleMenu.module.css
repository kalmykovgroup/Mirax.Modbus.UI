/* Корневая обёртка */
.wrap {
    position: relative;
    display: inline-block;
    /* тестовые стили можно убрать */
    /* border: 1px solid red; */
    height: 36px;
}

/* Summary как кнопка */
.trigger {
    list-style: none;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    height: 100%;
    padding: 0 12px;
    border-radius: 8px;
    border: 1px solid #e5e7eb;
    cursor: pointer;
    user-select: none;
    position: relative;
}
.trigger::-webkit-details-marker { display: none; }
.chev { font-size: 12px; line-height: 1; }

/* Панель меню */
.menu {
    position: absolute;
    z-index: 1000;
    display: none;

    min-width: 160px;
    max-width: min(280px, calc(100vw - 16px));
    max-height: min(60vh, 260px);
    overflow: auto;

    padding: 6px;
    border-radius: 10px;
    border: 1px solid #e5e7eb;
    box-shadow: 0 10px 18px rgba(0,0,0,.08), 0 2px 6px rgba(0,0,0,.06);
    backdrop-filter: blur(4px);

    /* ВАЖНО: изначально сидим слева от кнопки */
    left: 0;
    right: auto;

    /* Сдвигать влево, если не помещаемся */
    transform: translateX(calc(var(--menu-shift-x, 0px) * -1));
}

/* Показ меню только когда <details open> */
.wrap[open] .menu { display: flex; flex-direction: column; }

/* Позиционирование по вертикали */
.bottom .menu { top: calc(100% + 6px); }
.top    .menu { bottom: calc(100% + 6px); }

/* Пункты меню */
.item {
    text-align: left;
    padding: 8px 10px;
    border: 0;
    background: transparent;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    color: #5886dd;
}
.item:hover { background: #f3f4f6; }

/* Тёмная тема */
@media (prefers-color-scheme: dark) {
    .trigger { background: #111827; border-color: #374151; color: #e5e7eb; }
    .trigger:hover { background: #1f2937; }
    .menu { background: rgba(24,24,27,.98); border-color: #374151; }
    .item { color: #e5e7eb; }
    .item:hover { background: #374151; }
}
