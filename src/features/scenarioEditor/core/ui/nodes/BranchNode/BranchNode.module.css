@import '@scenario/ui/styles/commonToNode.css';

.branchNodeContainer {
    position: relative;
    box-sizing: border-box;
    background-clip: content-box;
    border: 1px solid var(--color-branch);
    background: transparent;
    border-radius: 5px;
    padding: 5px;
    width: 100%;
    height: 100%;
    z-index: 0;
    /* НЕ добавляем cursor здесь - ReactFlow сам управляет курсорами */
}

/* Выделенная ветка — показываем границу */
.branchNodeContainer[aria-selected='true'] {
    box-shadow: 0 0 7px var(--color-branch);
}

/* Фон ветки */
.bg {
    position: absolute;
    inset: 0;
    background: var(--branch-bg, rgba(255, 255, 255, 0.05));
    border: 1px solid var(--branch-border, rgba(255, 255, 255, 0.2));
    border-radius: 8px;
    pointer-events: none;
    transition: background 0.15s ease, border-color 0.15s ease;
}

/* При Ctrl — меняем цвет и показываем что можно взаимодействовать */
.branchNodeContainer[data-ctrl-mode='true'] .bg {
    background: var(--branch-bg-ctrl, rgba(100, 200, 255, 0.15));
    border-color: var(--branch-border-ctrl, rgba(100, 200, 255, 0.5));
}

/* При Shift — меняем цвет */
.branchNodeContainer[data-shift-mode='true'] .bg {
    background: var(--branch-bg-shift, rgba(255, 255, 255, 0.15));
    border-color: var(--branch-bg-shift, rgba(255, 255, 255, 0.4));
}

/* Визуальный индикатор что нода неактивна (без Ctrl) */
.branchNodeContainer[data-ctrl-mode='false'] {
    opacity: 0.7;
}

/* Возвращаем полную видимость при Ctrl */
.branchNodeContainer[data-ctrl-mode='true'] {
    opacity: 1;
}

/* Координаты и название */
.coordinates,
.name {
    position: absolute;
    left: 8px;
    top: 8px;
    color: #9aa0a6;
    font-size: 11px;
    pointer-events: none;
}

.name {
    position: absolute;
    top: -13px;
    left: 5px;
    font-size: 10px;
    color: var(--color-branch);
    pointer-events: none;
    user-select: none;
    transition: color 0.15s ease;
}

/* Меняем цвет названия при Ctrl для лучшей видимости */
.branchNodeContainer[data-ctrl-mode='true'] .name {
    color: rgba(100, 200, 255, 0.9);
    font-weight: 500;
}

/* Handle всегда интерактивен */
.target {
    pointer-events: auto;
    z-index: 2;
}

.target[aria-selected='true'] {
    background: var(--target-active-styles-bkg);
    box-shadow: var(--target-active-styles-box-shadow);
}