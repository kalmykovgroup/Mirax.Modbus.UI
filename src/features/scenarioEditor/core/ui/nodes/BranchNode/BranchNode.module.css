@import '@scenario/ui/styles/commonToNode.css';

.container {
    position: relative;
    box-sizing: border-box;
    background-clip: content-box;
    border: 1px solid var(--color-branch);
    background: transparent;
    border-radius: 5px;
    padding: 5px;
    width: 100%;
    height: 100%;
    min-width: 70px;
    min-height: 21px;
    z-index: 0;

    /* По умолчанию: НЕ перехватываем клики (проходят к детям) */

}

/* Когда нажат Ctrl — ветка становится интерактивной */
.container[data-ctrl-mode='true'] {
    pointer-events: auto;
    cursor: move;
}

/* Выделенная ветка ВСЕГДА интерактивна (для resize) */
.container[aria-selected='true'] {
    pointer-events: auto;
    box-shadow: 0 0 7px var(--color-branch);
}

/* Фон ветки */
.bg {
    position: absolute;
    inset: 0;
    background: var(--branch-bg, rgba(255, 255, 255, 0.05));
    border: 1px solid var(--branch-border, rgba(255, 255, 255, 0.2));
    border-radius: 8px;
    pointer-events: none;
}

/* При Ctrl — меняем цвет для индикации */
.container[data-ctrl-mode='true'] .bg {
    background: var(--branch-bg-ctrl, rgba(255, 255, 255, 0.15));
    border-color: var(--branch-border-ctrl, rgba(255, 255, 255, 0.4));
}

/* Координаты и название */
.coordinates,
.name {
    position: absolute;
    left: 8px;
    top: 8px;
    color: #9aa0a6;
    font-size: 11px;
    pointer-events: none;
}

.name {
    position: absolute;
    top: -13px;
    left: 5px;
    font-size: 10px;
    color: var(--color-branch);
    pointer-events: none;
    user-select: none;
}

/* Handle всегда интерактивен */
.target {
    pointer-events: auto;
    z-index: 2;
}

.target[aria-selected='true'] {
    background: var(--target-active-styles-bkg);
    box-shadow: var(--target-active-styles-box-shadow);
}

:global(.react-flow__resize-control) {
    pointer-events: auto !important;
    z-index: 10;
}

:global(.react-flow__node-BranchNode) {
    pointer-events: none;
}

:global(.react-flow__node-BranchNode[data-selected='true']) {
    pointer-events: auto;
}

:global(.react-flow__node-BranchNode.ctrl-mode) {
    pointer-events: auto;
}
